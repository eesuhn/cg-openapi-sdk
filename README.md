# `cg-openapi-sdk` — OpenAPI SDK Generation Script

Automates client SDK generation from OpenAPI 3.0 specs using the [OpenAPI Generator CLI](https://openapi-generator.tech/).<br>
Supports generating client code with configurable language and settings.

## Current SDK Repositories

Fetch the latest changes from each individual repository by running:

```bash
git submodule update --init --recursive
```

Below are the links to the available SDK repositories:
- Python — [cg-python](https://github.com/eesuhn/cg-python)
- TypeScript/Node — [cg-typescript-node](https://github.com/eesuhn/cg-typescript-node)

## Usage

> [!WARNING]
> - `openapi-generator` CLI must be installed. See [installation guide](https://openapi-generator.tech/docs/installation).
> - [`openapi-parser`](./openapi-parser/README.md) must be run beforehand to generate the latest merged OpenAPI 3.0 spec.

You can run commands in two ways:

### 1. Using the [`Makefile`](./Makefile)

Run commonly used commands. It updates submodules and then calls [`make.sh`](./make.sh) to perform generation:

- Update all submodules:

    ```bash
    make submodule
    ```

- Example: Generate Python SDK

    ```bash
    make cg-python
    ```

    ⚠️ Dynamically handles any target following the `cg-` prefix.

### 2. Using the [`main.sh`](./main.sh) script

```bash
./main.sh [command] [options]
```

#### Commands

- `generate` — Generates code using the OpenAPI Generator
- `clean` — Removes all files in the output directory except `.gitkeep`

#### Options

- `--out=OUT` — Output directory for generated code (default: `out`)
- `--gen=GEN` — Generator name, see the [generator List](https://openapi-generator.tech/docs/generators) (default: `python`)
- `--conf=CONF` — OpenAPI Generator config file (default: [`default-config.json`](./openapi-config/default-config.json))
    - ⚠️ Config files **must** be located in the [`openapi-config/`](./openapi-config/) directory
- `--help` — Display help message

#### Example

```bash
./main.sh generate --out=cg-python --gen=python --conf=cg-python.json
```

### Behavior

- Reads the OpenAPI 3.0 docs generated by [`openapi-parser/`](./openapi-parser/README.md)
- Cleans post-generation artifacts: `.github/`, `.gitlab-ci.yml`, `.travis.yml`, `git_push.sh`
